{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lhaveman\\\\email-generator\\\\src\\\\views\\\\SignatureView\\\\SignaturesView.tsx\",\n  _s = $RefreshSig$();\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { core } from '@tauri-apps/api';\nimport clipboard from 'tauri-plugin-clipboard-api';\nimport SignatureCard from '../../components/SignatureCard/SignatureCard';\nimport { useToast } from '../../ui/toast';\nimport { STRINGS } from '../../ui/strings';\nimport { COLOURS } from '../../ui/theme/theme';\nimport { CopyIcon20, EditIcon20, TrashIcon16 } from '../../ui/icons';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LEFT_MIN_WIDTH = 100;\nconst GUTTER = '1rem';\nconst PREVIEW_MAX_WIDTH = 450;\nconst PREVIEW_BG = COLOURS.panel;\nconst SIGNATURE_LOGO_WIDTH = 300;\nexport default function SignaturesView() {\n  _s();\n  const [signatureName, setSignatureName] = useState('');\n  const [name, setName] = useState('');\n  const [position, setPosition] = useState('');\n  const [department, setDepartment] = useState('');\n  const [company, setCompany] = useState('');\n  const [locations, setLocations] = useState({});\n  const [selectedLocation, setSelectedLocation] = useState('');\n  const [imageFileName, setImageFileName] = useState('');\n  const [signatureList, setSignatureList] = useState([]);\n  const [viewMode, setViewMode] = useState('preview');\n  const [lastSelectedSignature, setLastSelectedSignature] = useState(null);\n  const [imageBase64, setImageBase64] = useState(null);\n  const {\n    showToast\n  } = useToast();\n  const handleSave = () => {\n    var _locations$selectedLo;\n    const signature = {\n      signature_name: signatureName,\n      name,\n      position,\n      department,\n      company,\n      location: {\n        name: selectedLocation,\n        address: (_locations$selectedLo = locations[selectedLocation]) !== null && _locations$selectedLo !== void 0 ? _locations$selectedLo : ''\n      },\n      image_filename: imageFileName\n    };\n    core.invoke('save_signature_to_file', {\n      signature\n    }).then(() => {\n      showToast({\n        message: STRINGS.savedChanges,\n        variant: 'success'\n      });\n      console.log('Signature saved to file!');\n      reloadSignatureList();\n    }).catch(err => console.error('Failed to save signature:', err));\n  };\n  const reloadSignatureList = () => {\n    core.invoke('load_signatures').then(names => {\n      Promise.all(names.map(name => core.invoke('load_signature_file', {\n        name\n      }).then(sig => ({\n        signatureName: sig.signature_name,\n        userName: sig.name\n      })))).then(setSignatureList);\n    }).catch(err => console.error('Failed to reload signatures:', err));\n  };\n  const handleSelectSignature = useCallback((name, mode = 'preview') => {\n    core.invoke('load_signature_file', {\n      name\n    }).then(sig => {\n      setSignatureName(sig.signature_name);\n      setName(sig.name);\n      setPosition(sig.position);\n      setDepartment(sig.department);\n      setCompany(sig.company);\n      setSelectedLocation(sig.location.name);\n      setImageFileName(sig.image_filename);\n      setViewMode(mode);\n      setLastSelectedSignature(name);\n      if (name !== lastSelectedSignature) {\n        core.invoke('save_cache', {\n          cache: {\n            last_selected_signature: name\n          }\n        }).catch(err => console.error('Failed to save cache:', err));\n      }\n      if (sig.image_filename) {\n        core.invoke('get_signature_image_base64', {\n          filename: sig.image_filename\n        }).then(setImageBase64).catch(err => console.error('Failed to load image:', err));\n      } else {\n        setImageBase64(null); // Clear if no image\n      }\n    }).catch(err => console.error('Failed to load signature:', err));\n  }, [lastSelectedSignature]);\n  const handleDeleteSignature = name => {\n    core.invoke('delete_signature_file', {\n      name\n    }).then(() => {\n      setSignatureList(prev => prev.filter(sig => sig.signatureName !== name));\n      // optionally clear current preview if you deleted the currently open one...\n      showToast({\n        message: STRINGS.deleted(name),\n        variant: 'success'\n      });\n    }).catch(err => {\n      console.error('Failed to delete signature:', err);\n      showToast({\n        message: 'Failed to delete signature',\n        variant: 'danger'\n      });\n    });\n  };\n  const handleCopyToClipboard = async () => {\n    var _locations$selectedLo2;\n    const html = `\n      <div>\n        <strong>${name}</strong><br/>\n        ${position}, ${department}<br/>\n        ${company}<br/>\n        ${(_locations$selectedLo2 = locations[selectedLocation]) !== null && _locations$selectedLo2 !== void 0 ? _locations$selectedLo2 : ''}<br/>\n        ${imageBase64 ? `\n                    <img\n                      src=\"data:image/png;base64,${imageBase64}\"\n                      width=\"${SIGNATURE_LOGO_WIDTH}\"\n                      style=\"display:block;width:${SIGNATURE_LOGO_WIDTH}px;height:auto;margin-top:1rem;border:0;outline:0;text-decoration:none;\"\n                      alt=\"Signature image\"\n                    />` : ''}\n      </div>\n    `;\n    try {\n      await clipboard.writeHtml(html);\n      //await clipboard.writeText(`${name}\\n${position}, ${department}\\n${company}`);\n      showToast({\n        message: STRINGS.copiedToClipboard,\n        variant: 'success'\n      });\n      console.log('Copied to clipboard!');\n    } catch (err) {\n      console.error('Failed to copy to clipboard:', err);\n    }\n  };\n  const handleImageUpload = e => {\n    var _e$target$files;\n    const file = (_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0];\n    if (file) {\n      setImageFileName(file.name);\n    }\n  };\n  useEffect(() => {\n    core.invoke('load_cache').then(cache => {\n      if (cache.last_selected_signature) {\n        setLastSelectedSignature(cache.last_selected_signature);\n      }\n    }).catch(err => console.error('Failed to load cache:', err));\n  }, []);\n  useEffect(() => {\n    core.invoke('load_signatures').then(names => {\n      Promise.all(names.map(name => core.invoke('load_signature_file', {\n        name\n      }).then(sig => ({\n        signatureName: sig.signature_name,\n        userName: sig.name\n      })))).then(list => {\n        setSignatureList(list);\n\n        // Load cache and select signature\n        core.invoke('load_cache').then(cache => {\n          var _list$, _cache$last_selected_;\n          const fallback = (_list$ = list[0]) === null || _list$ === void 0 ? void 0 : _list$.signatureName;\n          const toSelect = (_cache$last_selected_ = cache.last_selected_signature) !== null && _cache$last_selected_ !== void 0 ? _cache$last_selected_ : fallback;\n          if (toSelect && viewMode === 'preview') {\n            handleSelectSignature(toSelect, 'preview');\n          }\n        }).catch(err => console.error('Failed to load cache:', err));\n      });\n    }).catch(err => console.error('Failed to load signatures:', err));\n  }, [handleSelectSignature, viewMode]);\n  useEffect(() => {\n    core.invoke('load_locations').then(setLocations).catch(err => console.error('Failed to load locations:', err));\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'flex',\n      height: '100%',\n      padding: '1rem'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        minWidth: LEFT_MIN_WIDTH,\n        flex: `1 1 ${LEFT_MIN_WIDTH}px`,\n        // grows/shrinks but never below min\n        borderRight: `1px solid ${COLOURS.divider}`,\n        paddingRight: GUTTER,\n        // padding on the left side of divider\n        overflowY: 'auto'\n      },\n      children: signatureList.map(({\n        signatureName,\n        userName\n      }) => /*#__PURE__*/_jsxDEV(SignatureCard, {\n        signatureName: signatureName,\n        userName: userName,\n        onSelect: () => handleSelectSignature(signatureName, 'preview'),\n        onEdit: () => handleSelectSignature(signatureName, 'edit'),\n        onDelete: () => handleDeleteSignature(signatureName)\n      }, signatureName, false, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        flex: '3 1 0',\n        paddingLeft: GUTTER,\n        overflowY: 'auto'\n      },\n      children: viewMode === 'preview' ?\n      /*#__PURE__*/\n      // ==== PREVIEW CONTAINER ====\n      _jsxDEV(\"div\", {\n        style: {\n          position: 'relative',\n          background: PREVIEW_BG,\n          border: `1px solid ${COLOURS.divider}`,\n          borderRadius: 12,\n          boxShadow: '0 1px 3px rgba(0,0,0,0.06)',\n          padding: '1rem 1rem 1.25rem 1rem',\n          maxWidth: PREVIEW_MAX_WIDTH,\n          width: '100%'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: '0.75rem',\n            paddingRight: 80 // leave some breathing room so text doesn't collide with icons\n          },\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            title: signatureName || 'Signature Preview',\n            style: {\n              margin: 0,\n              fontSize: '1.125rem',\n              fontWeight: 600,\n              color: `${COLOURS.text}`,\n              overflow: 'hidden',\n              textOverflow: 'ellipsis',\n              whiteSpace: 'nowrap'\n            },\n            children: signatureName || 'Signature Preview'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'absolute',\n            top: 10,\n            right: 10,\n            display: 'flex',\n            gap: 8\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            \"aria-label\": \"Copy signature to clipboard\",\n            title: \"Copy signature to clipboard\",\n            onClick: handleCopyToClipboard,\n            style: {\n              display: 'inline-flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              width: 32,\n              height: 32,\n              borderRadius: 6,\n              border: `1px solid ${COLOURS.border}`,\n              background: `${COLOURS.neutral}`,\n              color: `${COLOURS.text}`,\n              // ensures SVG 'currentColor' renders as dark\n              cursor: 'pointer',\n              boxShadow: '0 1px 2px rgba(0,0,0,0.04)',\n              padding: 0\n            },\n            children: /*#__PURE__*/_jsxDEV(CopyIcon20, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            \"aria-label\": \"Edit signature\",\n            title: \"Edit signature\",\n            onClick: () => setViewMode('edit'),\n            style: {\n              display: 'inline-flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              width: 32,\n              height: 32,\n              borderRadius: 6,\n              border: `1px solid ${COLOURS.border}`,\n              background: `${COLOURS.neutral}`,\n              color: `${COLOURS.text}`,\n              cursor: 'pointer',\n              boxShadow: '0 1px 2px rgba(0,0,0,0.04)',\n              padding: 0\n            },\n            children: /*#__PURE__*/_jsxDEV(EditIcon20, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 350,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            \"aria-label\": \"Delete signature\",\n            title: \"Delete signature\",\n            onClick: () => signatureName && handleDeleteSignature(signatureName),\n            style: {\n              display: 'inline-flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              width: 32,\n              height: 32,\n              borderRadius: 6,\n              border: `1px solid ${COLOURS.danger_border}`,\n              background: `${COLOURS.neutral}`,\n              color: `${COLOURS.danger}`,\n              cursor: 'pointer',\n              boxShadow: '0 1px 2px rgba(0,0,0,0.04)',\n              padding: 0\n            },\n            disabled: !signatureName,\n            children: /*#__PURE__*/_jsxDEV(TrashIcon16, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 376,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: '0.75rem',\n            lineHeight: 1.5\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              margin: 0\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 383,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 384,\n              columnNumber: 17\n            }, this), position, \", \", department, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 17\n            }, this), company, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 388,\n              columnNumber: 17\n            }, this), locations[selectedLocation]]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 382,\n            columnNumber: 15\n          }, this), imageBase64 && /*#__PURE__*/_jsxDEV(\"img\", {\n            src: `data:image/png;base64,${imageBase64}`,\n            alt: \"Signature\",\n            style: {\n              maxWidth: 300,\n              marginTop: '1rem'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 393,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 11\n      }, this) :\n      /*#__PURE__*/\n      // ==== EDIT VIEW ====\n      _jsxDEV(\"div\", {\n        style: {\n          maxWidth: PREVIEW_MAX_WIDTH,\n          width: '100%'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            marginTop: 0\n          },\n          children: \"Create or Edit Signature\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: e => e.preventDefault(),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: '1rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Signature Name:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 408,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 409,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: signatureName,\n              onChange: e => setSignatureName(e.target.value),\n              style: {\n                width: '100%'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 410,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 407,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: '1rem',\n              marginBottom: '1rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                flex: 1\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: [\"Name\", /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    color: 'red'\n                  },\n                  children: \" *\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 422,\n                  columnNumber: 25\n                }, this), \":\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 421,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 424,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: name,\n                onChange: e => setName(e.target.value),\n                style: {\n                  width: '100%'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 425,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 420,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                flex: 1\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: [\"Position\", /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    color: 'red'\n                  },\n                  children: \" *\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 434,\n                  columnNumber: 29\n                }, this), \":\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 433,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 436,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: position,\n                onChange: e => setPosition(e.target.value),\n                style: {\n                  width: '100%'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 437,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 432,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 419,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: '1rem',\n              marginBottom: '1rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                flex: 1\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Company:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 449,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 450,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: company,\n                onChange: e => setCompany(e.target.value),\n                style: {\n                  width: '100%'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 451,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 448,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                flex: 1\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Department:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 459,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 460,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: department,\n                onChange: e => setDepartment(e.target.value),\n                style: {\n                  width: '100%'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 461,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 458,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 447,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: '1rem',\n              marginBottom: '1rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                flex: 1\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Location:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 473,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 474,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: selectedLocation,\n                onChange: e => setSelectedLocation(e.target.value),\n                style: {\n                  width: '100%'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  disabled: true,\n                  value: \"\",\n                  children: \"-- Select Location --\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 480,\n                  columnNumber: 21\n                }, this), Object.entries(locations).map(([name, address]) => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: name,\n                  children: name\n                }, name, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 484,\n                  columnNumber: 23\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 475,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 472,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                flex: 1\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Company Logo or Signature Image:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 491,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 492,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                accept: \"image/*\",\n                onChange: handleImageUpload,\n                style: {\n                  width: '100%'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 493,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 490,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 471,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: '0.5rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: handleSave,\n              children: \"Save\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 504,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: () => setViewMode('preview'),\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 507,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 503,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 220,\n    columnNumber: 5\n  }, this);\n}\n_s(SignaturesView, \"tRaJZsx6j+SsPkkCpATnyhdaNfo=\", false, function () {\n  return [useToast];\n});\n_c = SignaturesView;\nvar _c;\n$RefreshReg$(_c, \"SignaturesView\");","map":{"version":3,"names":["React","useCallback","useEffect","useState","core","clipboard","SignatureCard","useToast","STRINGS","COLOURS","CopyIcon20","EditIcon20","TrashIcon16","jsxDEV","_jsxDEV","LEFT_MIN_WIDTH","GUTTER","PREVIEW_MAX_WIDTH","PREVIEW_BG","panel","SIGNATURE_LOGO_WIDTH","SignaturesView","_s","signatureName","setSignatureName","name","setName","position","setPosition","department","setDepartment","company","setCompany","locations","setLocations","selectedLocation","setSelectedLocation","imageFileName","setImageFileName","signatureList","setSignatureList","viewMode","setViewMode","lastSelectedSignature","setLastSelectedSignature","imageBase64","setImageBase64","showToast","handleSave","_locations$selectedLo","signature","signature_name","location","address","image_filename","invoke","then","message","savedChanges","variant","console","log","reloadSignatureList","catch","err","error","names","Promise","all","map","sig","userName","handleSelectSignature","mode","cache","last_selected_signature","filename","handleDeleteSignature","prev","filter","deleted","handleCopyToClipboard","_locations$selectedLo2","html","writeHtml","copiedToClipboard","handleImageUpload","e","_e$target$files","file","target","files","list","_list$","_cache$last_selected_","fallback","toSelect","style","display","height","padding","children","minWidth","flex","borderRight","divider","paddingRight","overflowY","onSelect","onEdit","onDelete","fileName","_jsxFileName","lineNumber","columnNumber","paddingLeft","background","border","borderRadius","boxShadow","maxWidth","width","alignItems","gap","title","margin","fontSize","fontWeight","color","text","overflow","textOverflow","whiteSpace","top","right","type","onClick","justifyContent","neutral","cursor","danger_border","danger","disabled","marginTop","lineHeight","src","alt","onSubmit","preventDefault","marginBottom","value","onChange","Object","entries","accept","_c","$RefreshReg$"],"sources":["C:/Users/lhaveman/email-generator/src/views/SignatureView/SignaturesView.tsx"],"sourcesContent":["\r\nimport React, { useCallback, useEffect, useState } from 'react';\r\nimport { core } from '@tauri-apps/api';\r\nimport clipboard from 'tauri-plugin-clipboard-api';\r\n\r\nimport SignatureCard from '../../components/SignatureCard/SignatureCard';\r\n\r\nimport { useToast } from '../../ui/toast';\r\nimport { STRINGS } from '../../ui/strings';\r\nimport { COLOURS } from '../../ui/theme/theme';\r\nimport { CopyIcon20, EditIcon20, TrashIcon16 } from '../../ui/icons';\r\n\r\n\r\nconst LEFT_MIN_WIDTH = 100;\r\nconst GUTTER = '1rem';\r\nconst PREVIEW_MAX_WIDTH = 450;\r\nconst PREVIEW_BG = COLOURS.panel;\r\nconst SIGNATURE_LOGO_WIDTH = 300;\r\n\r\nexport default function SignaturesView() {\r\n\r\n  const [signatureName, setSignatureName] = useState('');\r\n  const [name, setName] = useState('');\r\n  const [position, setPosition] = useState('');\r\n  const [department, setDepartment] = useState('');\r\n  const [company, setCompany] = useState('');\r\n  const [locations, setLocations] = useState<Record<string, string>>({});\r\n  const [selectedLocation, setSelectedLocation] = useState('');\r\n  const [imageFileName, setImageFileName] = useState('');\r\n  const [signatureList, setSignatureList] = useState<\r\n    { signatureName: string; userName: string }[]\r\n  >([]);\r\n  const [viewMode, setViewMode] = useState<'preview' | 'edit'>('preview');\r\n  const [lastSelectedSignature, setLastSelectedSignature] = useState<string | null>(null);\r\n  const [imageBase64, setImageBase64] = useState<string | null>(null);\r\n\r\n  const { showToast } = useToast();\r\n\r\n  interface Signature {\r\n  signature_name: string;\r\n  name: string;\r\n  position: string;\r\n  department: string;\r\n  company: string;\r\n  location: {\r\n    name: string;\r\n    address: string;\r\n  };\r\n  image_filename: string;\r\n  }\r\n\r\n  const handleSave = () => {\r\n    const signature = {\r\n      signature_name: signatureName,\r\n      name,\r\n      position,\r\n      department,\r\n      company,\r\n      location: {\r\n        name: selectedLocation,\r\n        address: locations[selectedLocation] ?? ''\r\n      },\r\n      image_filename: imageFileName\r\n    };\r\n\r\n    core.invoke('save_signature_to_file', { signature })\r\n      .then(() => {\r\n        showToast({ message: STRINGS.savedChanges, variant: 'success'}); \r\n        console.log('Signature saved to file!')\r\n        reloadSignatureList();\r\n      })\r\n      .catch(err => console.error('Failed to save signature:', err));\r\n  };\r\n\r\n  const reloadSignatureList = () => {\r\n    core.invoke<string[]>('load_signatures')\r\n      .then((names) => {\r\n        Promise.all(\r\n          names.map((name) =>\r\n            core.invoke<Signature>('load_signature_file', { name })\r\n              .then((sig) => ({\r\n                signatureName: sig.signature_name,\r\n                userName: sig.name,\r\n              }))\r\n          )\r\n        ).then(setSignatureList);\r\n      })\r\n      .catch((err) => console.error('Failed to reload signatures:', err));\r\n  };\r\n\r\n  const handleSelectSignature = useCallback((name: string, mode: 'preview' | 'edit' = 'preview') => {\r\n    core.invoke<Signature>('load_signature_file', { name })\r\n      .then((sig) => {\r\n        setSignatureName(sig.signature_name);\r\n        setName(sig.name);\r\n        setPosition(sig.position);\r\n        setDepartment(sig.department);\r\n        setCompany(sig.company);\r\n        setSelectedLocation(sig.location.name);\r\n        setImageFileName(sig.image_filename);\r\n        setViewMode(mode);\r\n        setLastSelectedSignature(name);\r\n        \r\n        if (name !== lastSelectedSignature) {\r\n          core.invoke('save_cache', {\r\n            cache: { last_selected_signature: name }\r\n          }).catch((err) => console.error('Failed to save cache:', err));\r\n        }\r\n\r\n        if (sig.image_filename) {\r\n                core.invoke<string>('get_signature_image_base64', { filename: sig.image_filename })\r\n                  .then(setImageBase64)\r\n                  .catch((err) => console.error('Failed to load image:', err));\r\n              } else {\r\n                setImageBase64(null); // Clear if no image\r\n              }\r\n            })\r\n            .catch((err) => console.error('Failed to load signature:', err));\r\n  }, [lastSelectedSignature]);\r\n\r\n  const handleDeleteSignature = (name: string) => {\r\n\r\n    core.invoke('delete_signature_file', { name })\r\n      .then(() => {\r\n        setSignatureList((prev) => prev.filter((sig) => sig.signatureName !== name));\r\n        // optionally clear current preview if you deleted the currently open one...\r\n        showToast({ message: STRINGS.deleted(name), variant: 'success' });\r\n      })\r\n      .catch((err) => {\r\n        console.error('Failed to delete signature:', err);\r\n        showToast({ message: 'Failed to delete signature', variant: 'danger' });\r\n      });\r\n  };\r\n\r\n  const handleCopyToClipboard = async () => {\r\n    const html = `\r\n      <div>\r\n        <strong>${name}</strong><br/>\r\n        ${position}, ${department}<br/>\r\n        ${company}<br/>\r\n        ${locations[selectedLocation] ?? ''}<br/>\r\n        ${\r\n          imageBase64\r\n                  ? `\r\n                    <img\r\n                      src=\"data:image/png;base64,${imageBase64}\"\r\n                      width=\"${SIGNATURE_LOGO_WIDTH}\"\r\n                      style=\"display:block;width:${SIGNATURE_LOGO_WIDTH}px;height:auto;margin-top:1rem;border:0;outline:0;text-decoration:none;\"\r\n                      alt=\"Signature image\"\r\n                    />`\r\n                  : ''\r\n        }\r\n      </div>\r\n    `;\r\n    try {\r\n      await clipboard.writeHtml(html);\r\n      //await clipboard.writeText(`${name}\\n${position}, ${department}\\n${company}`);\r\n      showToast({ message: STRINGS.copiedToClipboard, variant: 'success'});\r\n      console.log('Copied to clipboard!');\r\n    } catch (err) {\r\n      console.error('Failed to copy to clipboard:', err);\r\n    }\r\n  };\r\n\r\n  const handleImageUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (file) {\r\n      setImageFileName(file.name);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    core.invoke<{ last_selected_signature: string | null }>('load_cache')\r\n      .then((cache) => {\r\n        if (cache.last_selected_signature) {\r\n          setLastSelectedSignature(cache.last_selected_signature);\r\n        }\r\n      })\r\n      .catch((err) => console.error('Failed to load cache:', err));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    core.invoke<string[]>('load_signatures')\r\n      .then((names) => {\r\n        Promise.all(\r\n          names.map((name) =>\r\n            core.invoke<Signature>('load_signature_file', { name })\r\n              .then((sig) => ({\r\n                signatureName: sig.signature_name,\r\n                userName: sig.name,\r\n              }))\r\n          )\r\n        ).then((list) => {\r\n          setSignatureList(list);\r\n\r\n          // Load cache and select signature\r\n          core.invoke<{ last_selected_signature: string | null }>('load_cache')\r\n            .then((cache) => {\r\n              const fallback = list[0]?.signatureName;\r\n              const toSelect = cache.last_selected_signature ?? fallback;\r\n              if (toSelect && viewMode === 'preview') \r\n                {\r\n                  handleSelectSignature(toSelect, 'preview');\r\n                }\r\n            })\r\n            .catch((err) => console.error('Failed to load cache:', err));\r\n        });\r\n      })\r\n      .catch((err) => console.error('Failed to load signatures:', err));\r\n  }, [handleSelectSignature, viewMode]);\r\n\r\n\r\n  useEffect(() => {\r\n    core.invoke<Record<string, string>>('load_locations')\r\n      .then(setLocations)\r\n      .catch(err => console.error('Failed to load locations:', err));\r\n  }, []);\r\n\r\n  return (\r\n    <div \r\n      style=\r\n      {{ \r\n        display: 'flex', \r\n        height: '100%', \r\n        padding: '1rem' \r\n      }}\r\n    >\r\n      {/* Left column: for signature list */}\r\n      <div \r\n        style=\r\n        {{ \r\n          minWidth: LEFT_MIN_WIDTH,\r\n          flex: `1 1 ${LEFT_MIN_WIDTH}px`, // grows/shrinks but never below min\r\n          borderRight: `1px solid ${COLOURS.divider}`,\r\n          paddingRight: GUTTER, // padding on the left side of divider\r\n          overflowY: 'auto',\r\n        }}\r\n      >      \r\n        {signatureList.map(({ signatureName, userName }) => (\r\n          <SignatureCard\r\n            key={signatureName}\r\n            signatureName={signatureName}\r\n            userName={userName}\r\n            onSelect={() => handleSelectSignature(signatureName, 'preview')}\r\n            onEdit={() => handleSelectSignature(signatureName, 'edit')}\r\n            onDelete={() => handleDeleteSignature(signatureName)}\r\n          />\r\n        ))}\r\n      </div>\r\n     \r\n      {/* Right column: Signature Preview */}      \r\n      <div style={{ flex: '3 1 0', paddingLeft: GUTTER, overflowY: 'auto' }}>\r\n        {viewMode === 'preview' ? (\r\n          // ==== PREVIEW CONTAINER ====\r\n          <div\r\n            style={{\r\n              position: 'relative',\r\n              background: PREVIEW_BG,\r\n              border: `1px solid ${COLOURS.divider}`,\r\n              borderRadius: 12,\r\n              boxShadow: '0 1px 3px rgba(0,0,0,0.06)',\r\n              padding: '1rem 1rem 1.25rem 1rem',\r\n              maxWidth: PREVIEW_MAX_WIDTH,\r\n              width: '100%',\r\n            }}\r\n          >\r\n\r\n            {/* Header: Title on the left, icon actions in the top-right */}\r\n            <div\r\n              style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.75rem',\r\n                paddingRight: 80, // leave some breathing room so text doesn't collide with icons\r\n              }}\r\n            >\r\n              <h3\r\n                title={signatureName || 'Signature Preview'}\r\n                style={{\r\n                  margin: 0,\r\n                  fontSize: '1.125rem',\r\n                  fontWeight: 600,\r\n                  color: `${COLOURS.text}`,\r\n                  overflow: 'hidden',\r\n                  textOverflow: 'ellipsis',\r\n                  whiteSpace: 'nowrap',\r\n                }}\r\n              >\r\n                {signatureName || 'Signature Preview'}\r\n              </h3>\r\n            </div>\r\n\r\n            {/* Icon toolbar (top-right corner) */}\r\n            <div\r\n              style={{\r\n                position: 'absolute',\r\n                top: 10,\r\n                right: 10,\r\n                display: 'flex',\r\n                gap: 8,\r\n              }}\r\n            >\r\n              {/* Copy */}\r\n              <button\r\n                type=\"button\"\r\n                aria-label=\"Copy signature to clipboard\"\r\n                title=\"Copy signature to clipboard\"\r\n                onClick={handleCopyToClipboard}\r\n                style={{\r\n                  display: 'inline-flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n                  width: 32,\r\n                  height: 32,\r\n                  borderRadius: 6,\r\n                  border: `1px solid ${COLOURS.border}`,\r\n                  background: `${COLOURS.neutral}`,\r\n                  color: `${COLOURS.text}`, // ensures SVG 'currentColor' renders as dark\r\n                  cursor: 'pointer',\r\n                  boxShadow: '0 1px 2px rgba(0,0,0,0.04)',\r\n                  padding: 0,\r\n                }}\r\n              >\r\n                {/* Copy SVG */}\r\n                <CopyIcon20/>\r\n              </button>\r\n\r\n              {/* Edit */}\r\n              <button\r\n                type=\"button\"\r\n                aria-label=\"Edit signature\"\r\n                title=\"Edit signature\"\r\n                onClick={() => setViewMode('edit')}\r\n                style={{\r\n                  display: 'inline-flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n                  width: 32,\r\n                  height: 32,\r\n                  borderRadius: 6,\r\n                  border: `1px solid ${COLOURS.border}`,\r\n                  background: `${COLOURS.neutral}`,\r\n                  color: `${COLOURS.text}`,\r\n                  cursor: 'pointer',\r\n                  boxShadow: '0 1px 2px rgba(0,0,0,0.04)',\r\n                  padding: 0,\r\n                }}\r\n              >\r\n                {/* Edit SVG */}\r\n                <EditIcon20/>\r\n              </button>\r\n              \r\n                {/* Delete */}\r\n                <button\r\n                  type=\"button\"\r\n                  aria-label=\"Delete signature\"\r\n                  title=\"Delete signature\"\r\n                  onClick={() => signatureName && handleDeleteSignature(signatureName)}\r\n                  style={{\r\n                    display: 'inline-flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    width: 32,\r\n                    height: 32,\r\n                    borderRadius: 6,\r\n                    border: `1px solid ${COLOURS.danger_border}`,\r\n                    background: `${COLOURS.neutral}`,\r\n                    color: `${COLOURS.danger}`,\r\n                    cursor: 'pointer',\r\n                    boxShadow: '0 1px 2px rgba(0,0,0,0.04)',\r\n                    padding: 0,\r\n                  }}\r\n                  disabled={!signatureName}\r\n                >\r\n                  {/*Trash SVG */}\r\n                  <TrashIcon16/>\r\n                </button>\r\n            </div>\r\n\r\n            {/* Signature contents */}\r\n            <div style={{ marginTop: '0.75rem', lineHeight: 1.5 }}>\r\n              <p style={{ margin: 0 }}>\r\n                <strong>{name}</strong>\r\n                <br />\r\n                {position}, {department}\r\n                <br />\r\n                {company}\r\n                <br />\r\n                {locations[selectedLocation]}\r\n              </p>\r\n\r\n              {imageBase64 && (\r\n                <img\r\n                  src={`data:image/png;base64,${imageBase64}`}\r\n                  alt=\"Signature\"\r\n                  style={{ maxWidth: 300, marginTop: '1rem' }}\r\n                />\r\n              )}\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          // ==== EDIT VIEW ====\r\n          <div style={{ maxWidth: PREVIEW_MAX_WIDTH, width: '100%' }}>\r\n            <h3 style={{ marginTop: 0 }}>Create or Edit Signature</h3>\r\n            <form onSubmit={(e) => e.preventDefault()}>\r\n              {/* Signature Name */}\r\n              <div style={{ marginBottom: '1rem' }}>\r\n                <label>Signature Name:</label>\r\n                <br />\r\n                <input\r\n                  type=\"text\"\r\n                  value={signatureName}\r\n                  onChange={(e) => setSignatureName(e.target.value)}\r\n                  style={{ width: '100%' }}\r\n                />\r\n              </div>\r\n\r\n              {/* Name and Position */}\r\n              <div style={{ display: 'flex', gap: '1rem', marginBottom: '1rem' }}>\r\n                <div style={{ flex: 1 }}>\r\n                  <label>\r\n                    Name<span style={{ color: 'red' }}> *</span>:\r\n                  </label>\r\n                  <br />\r\n                  <input\r\n                    type=\"text\"\r\n                    value={name}\r\n                    onChange={(e) => setName(e.target.value)}\r\n                    style={{ width: '100%' }}\r\n                  />\r\n                </div>\r\n                <div style={{ flex: 1 }}>\r\n                  <label>\r\n                    Position<span style={{ color: 'red' }}> *</span>:\r\n                  </label>\r\n                  <br />\r\n                  <input\r\n                    type=\"text\"\r\n                    value={position}\r\n                    onChange={(e) => setPosition(e.target.value)}\r\n                    style={{ width: '100%' }}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/* Company and Department */}\r\n              <div style={{ display: 'flex', gap: '1rem', marginBottom: '1rem' }}>\r\n                <div style={{ flex: 1 }}>\r\n                  <label>Company:</label>\r\n                  <br />\r\n                  <input\r\n                    type=\"text\"\r\n                    value={company}\r\n                    onChange={(e) => setCompany(e.target.value)}\r\n                    style={{ width: '100%' }}\r\n                  />\r\n                </div>\r\n                <div style={{ flex: 1 }}>\r\n                  <label>Department:</label>\r\n                  <br />\r\n                  <input\r\n                    type=\"text\"\r\n                    value={department}\r\n                    onChange={(e) => setDepartment(e.target.value)}\r\n                    style={{ width: '100%' }}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/* Location Dropdown and File Picker */}\r\n              <div style={{ display: 'flex', gap: '1rem', marginBottom: '1rem' }}>\r\n                <div style={{ flex: 1 }}>\r\n                  <label>Location:</label>\r\n                  <br />\r\n                  <select\r\n                    value={selectedLocation}\r\n                    onChange={(e) => setSelectedLocation(e.target.value)}\r\n                    style={{ width: '100%' }}\r\n                  >\r\n                    <option disabled value=\"\">\r\n                      -- Select Location --\r\n                    </option>\r\n                    {Object.entries(locations).map(([name, address]) => (\r\n                      <option key={name} value={name}>\r\n                        {name}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n                <div style={{ flex: 1 }}>\r\n                  <label>Company Logo or Signature Image:</label>\r\n                  <br />\r\n                  <input\r\n                    type=\"file\"\r\n                    accept=\"image/*\"\r\n                    onChange={handleImageUpload}\r\n                    style={{ width: '100%' }}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/* Save Button */}\r\n              <div style={{ display: 'flex', gap: '0.5rem' }}>\r\n                <button type=\"button\" onClick={handleSave}>\r\n                  Save\r\n                </button>\r\n                <button type=\"button\" onClick={() => setViewMode('preview')}>\r\n                  Cancel\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}