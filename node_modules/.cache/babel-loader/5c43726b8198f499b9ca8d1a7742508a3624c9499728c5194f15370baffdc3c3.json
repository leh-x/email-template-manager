{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lhaveman\\\\email-generator\\\\src\\\\views\\\\SignatureView\\\\SignaturesView.tsx\",\n  _s = $RefreshSig$();\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { core } from '@tauri-apps/api';\nimport clipboard from 'tauri-plugin-clipboard-api';\nimport SignatureCard from '../../components/SignatureCard/SignatureCard';\nimport viewStyles from './SignatureView.module.css';\nimport { useToast } from '../../ui/toast';\nimport { STRINGS } from '../../ui/strings';\nimport { COLOURS } from '../../ui/theme/theme';\nimport { CopyIcon20, EditIcon20, TrashIcon16, PlusIcon20 } from '../../ui/icons';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LEFT_MIN_WIDTH = 100;\nconst GUTTER = '1rem';\nconst PREVIEW_MAX_WIDTH = 450;\nconst PREVIEW_BG = COLOURS.panel;\nconst SIGNATURE_LOGO_WIDTH = 300;\nexport default function SignaturesView() {\n  _s();\n  const [signatureName, setSignatureName] = useState('');\n  const [name, setName] = useState('');\n  const [position, setPosition] = useState('');\n  const [department, setDepartment] = useState('');\n  const [company, setCompany] = useState('');\n  const [locations, setLocations] = useState({});\n  const [selectedLocation, setSelectedLocation] = useState('');\n  const [imageFileName, setImageFileName] = useState('');\n  const [signatureList, setSignatureList] = useState([]);\n  const [viewMode, setViewMode] = useState('preview');\n  const [lastSelectedSignature, setLastSelectedSignature] = useState(null);\n  const [imageBase64, setImageBase64] = useState(null);\n  const {\n    showToast\n  } = useToast();\n  const handleSave = () => {\n    var _locations$selectedLo;\n    const signature = {\n      signature_name: signatureName,\n      name,\n      position,\n      department,\n      company,\n      location: {\n        name: selectedLocation,\n        address: (_locations$selectedLo = locations[selectedLocation]) !== null && _locations$selectedLo !== void 0 ? _locations$selectedLo : ''\n      },\n      image_filename: imageFileName\n    };\n    core.invoke('save_signature_to_file', {\n      signature\n    }).then(() => {\n      showToast({\n        message: STRINGS.savedChanges,\n        variant: 'success'\n      });\n      console.log('Signature saved to file!');\n      reloadSignatureList();\n    }).catch(err => console.error('Failed to save signature:', err));\n  };\n  const reloadSignatureList = () => {\n    core.invoke('load_signatures').then(names => {\n      Promise.all(names.map(name => core.invoke('load_signature_file', {\n        name\n      }).then(sig => ({\n        signatureName: sig.signature_name,\n        userName: sig.name\n      })))).then(setSignatureList);\n    }).catch(err => console.error('Failed to reload signatures:', err));\n  };\n  const handleSelectSignature = useCallback((name, mode = 'preview') => {\n    // 1) Load the full signature file for this name\n    core.invoke('load_signature_file', {\n      name\n    }).then(sig => {\n      // 2) Populate UI state from the loaded signature\n      setSignatureName(sig.signature_name);\n      setName(sig.name);\n      setPosition(sig.position);\n      setDepartment(sig.department);\n      setCompany(sig.company);\n      setSelectedLocation(sig.location.name);\n      setImageFileName(sig.image_filename);\n      setViewMode(mode);\n      setLastSelectedSignature(name);\n\n      // 3) Persist ONLY this view's last-selected field (safe partial update)\n      core.invoke('update_cache', {\n        patch: {\n          signature_view_last_selected_signature: name\n        }\n      }).catch(err => console.error('Failed to update cache:', err));\n\n      // 4) Load image (if any) as base64 for preview/copy\n      if (sig.image_filename) {\n        core.invoke('get_signature_image_base64', {\n          filename: sig.image_filename\n        }).then(setImageBase64).catch(err => {\n          setImageBase64(null);\n          console.error('Failed to load image:', err);\n        });\n      } else {\n        setImageBase64(null);\n      }\n    }).catch(err => console.error('Failed to load signature:', err));\n  }, [] // setters are stable; no deps needed. Keeps the callback identity stable.\n  );\n  const handleDeleteSignature = name => {\n    core.invoke('delete_signature_file', {\n      name\n    }).then(() => {\n      setSignatureList(prev => prev.filter(sig => sig.signatureName !== name));\n      // optionally clear current preview if you deleted the currently open one...\n      showToast({\n        message: STRINGS.deleted(name),\n        variant: 'success'\n      });\n    }).catch(err => {\n      console.error('Failed to delete signature:', err);\n      showToast({\n        message: 'Failed to delete signature',\n        variant: 'danger'\n      });\n    });\n  };\n  const handleCreateNewSignature = () => {\n    // Clear all the form fields\n    setSignatureName('');\n    setName('');\n    setPosition('');\n    setDepartment('');\n    setCompany('');\n    setSelectedLocation(''); // or Object.keys(locations)[0] ?? '' if you want a default\n    setImageFileName('');\n    setImageBase64(null);\n\n    // Switch to edit mode so the user can fill it out\n    setViewMode('edit');\n\n    // Do NOT touch lastSelectedSignature or save the cache here;\n    // this is a new, unsaved draft.\n  };\n  const handleCopyToClipboard = async () => {\n    var _locations$selectedLo2;\n    const html = `\n      <div>\n        <strong>${name}</strong><br/>\n        ${position}, ${department}<br/>\n        ${company}<br/>\n        ${(_locations$selectedLo2 = locations[selectedLocation]) !== null && _locations$selectedLo2 !== void 0 ? _locations$selectedLo2 : ''}<br/>\n        ${imageBase64 ? `\n                    <img\n                      src=\"data:image/png;base64,${imageBase64}\"\n                      width=\"${SIGNATURE_LOGO_WIDTH}\"\n                      style=\"display:block;width:${SIGNATURE_LOGO_WIDTH}px;height:auto;margin-top:1rem;border:0;outline:0;text-decoration:none;\"\n                      alt=\"Signature image\"\n                    />` : ''}\n      </div>\n    `;\n    try {\n      await clipboard.writeHtml(html);\n      showToast({\n        message: STRINGS.copiedToClipboard,\n        variant: 'success'\n      });\n      console.log('Copied to clipboard!');\n    } catch (err) {\n      console.error('Failed to copy to clipboard:', err);\n    }\n  };\n  const handleImageUpload = e => {\n    var _e$target$files;\n    const file = (_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0];\n    if (file) {\n      setImageFileName(file.name);\n    }\n  };\n  useEffect(() => {\n    core.invoke('load_cache').then(cache => {\n      if (cache.signature_view_last_selected_signature) {\n        setLastSelectedSignature(cache.signature_view_last_selected_signature);\n      }\n    }).catch(err => console.error('Failed to load cache:', err));\n  }, []);\n  useEffect(() => {\n    core.invoke('load_signatures').then(names => {\n      Promise.all(names.map(name => core.invoke('load_signature_file', {\n        name\n      }).then(sig => ({\n        signatureName: sig.signature_name,\n        userName: sig.name\n      })))).then(list => {\n        setSignatureList(list);\n\n        // Load cache and select signature\n        core.invoke('load_cache').then(cache => {\n          var _list$, _cache$signature_view;\n          const fallback = (_list$ = list[0]) === null || _list$ === void 0 ? void 0 : _list$.signatureName;\n          const toSelect = (_cache$signature_view = cache.signature_view_last_selected_signature) !== null && _cache$signature_view !== void 0 ? _cache$signature_view : fallback;\n          if (toSelect && viewMode === 'preview') {\n            handleSelectSignature(toSelect, 'preview');\n          }\n        }).catch(err => console.error('Failed to load cache:', err));\n      });\n    }).catch(err => console.error('Failed to load signatures:', err));\n  }, [handleSelectSignature, viewMode]);\n  useEffect(() => {\n    core.invoke('load_locations').then(setLocations).catch(err => console.error('Failed to load locations:', err));\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'flex',\n      height: '100%',\n      padding: '1rem'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        minWidth: LEFT_MIN_WIDTH,\n        flex: `1 1 ${LEFT_MIN_WIDTH}px`,\n        // grows/shrinks but never below min\n        borderRight: `1px solid ${COLOURS.divider}`,\n        paddingRight: GUTTER,\n        // padding on the left side of divider\n        overflowY: 'auto'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'sticky',\n          // stays visible while list scrolls\n          top: 0,\n          background: '#fff',\n          padding: '0.25rem 0 0.5rem 0',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'space-between',\n          gap: '0.5rem',\n          zIndex: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          style: {\n            margin: 0,\n            fontSize: '0.875rem',\n            fontWeight: 600,\n            color: '#374151'\n          },\n          children: \"Signatures\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          \"aria-label\": \"Create new signature\",\n          title: \"Create new signature\",\n          onClick: handleCreateNewSignature,\n          style: {\n            display: 'inline-flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            width: 32,\n            height: 32,\n            borderRadius: 6,\n            border: '1px solid #d0d7de',\n            background: '#fff',\n            color: '#111827',\n            cursor: 'pointer',\n            boxShadow: '0 1px 2px rgba(0,0,0,0.04)',\n            padding: 0,\n            userSelect: 'none'\n          },\n          children: /*#__PURE__*/_jsxDEV(PlusIcon20, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 9\n      }, this), signatureList.map(({\n        signatureName,\n        userName\n      }) => /*#__PURE__*/_jsxDEV(SignatureCard, {\n        signatureName: signatureName,\n        userName: userName,\n        onSelect: () => handleSelectSignature(signatureName, 'preview'),\n        onEdit: () => handleSelectSignature(signatureName, 'edit'),\n        onDelete: () => handleDeleteSignature(signatureName)\n      }, signatureName, false, {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        flex: '3 1 0',\n        paddingLeft: GUTTER,\n        overflowY: 'auto'\n      },\n      children: viewMode === 'preview' ?\n      /*#__PURE__*/\n      // ==== PREVIEW CONTAINER ====\n      _jsxDEV(\"div\", {\n        style: {\n          position: 'relative',\n          background: PREVIEW_BG,\n          border: `1px solid ${COLOURS.divider}`,\n          borderRadius: 12,\n          boxShadow: '0 1px 3px rgba(0,0,0,0.06)',\n          padding: '1rem 1rem 1.25rem 1rem',\n          maxWidth: PREVIEW_MAX_WIDTH,\n          width: '100%'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: '0.75rem',\n            paddingRight: 80 // leave some breathing room so text doesn't collide with icons\n          },\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            title: signatureName || 'Signature Preview',\n            style: {\n              margin: 0,\n              fontSize: '1.125rem',\n              fontWeight: 600,\n              color: `${COLOURS.text}`,\n              overflow: 'hidden',\n              textOverflow: 'ellipsis',\n              whiteSpace: 'nowrap'\n            },\n            children: signatureName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'absolute',\n            top: 10,\n            right: 10,\n            display: 'flex',\n            gap: 8\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            \"aria-label\": \"Copy signature to clipboard\",\n            title: \"Copy signature to clipboard\",\n            onClick: handleCopyToClipboard,\n            className: viewStyles.iconBtn,\n            children: /*#__PURE__*/_jsxDEV(CopyIcon20, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 390,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 382,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            \"aria-label\": \"Edit signature\",\n            title: \"Edit signature\",\n            onClick: () => setViewMode('edit'),\n            className: viewStyles.iconBtn,\n            children: /*#__PURE__*/_jsxDEV(EditIcon20, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 402,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            \"aria-label\": \"Delete signature\",\n            title: \"Delete signature\",\n            onClick: () => signatureName && handleDeleteSignature(signatureName),\n            className: `${viewStyles.iconBtn} ${viewStyles.danger}`,\n            disabled: !signatureName,\n            children: /*#__PURE__*/_jsxDEV(TrashIcon16, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 415,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: '0.75rem',\n            lineHeight: 1.5\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              margin: 0\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 422,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 423,\n              columnNumber: 17\n            }, this), position, \", \", department, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 425,\n              columnNumber: 17\n            }, this), company, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 427,\n              columnNumber: 17\n            }, this), locations[selectedLocation]]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 15\n          }, this), imageBase64 && /*#__PURE__*/_jsxDEV(\"img\", {\n            src: `data:image/png;base64,${imageBase64}`,\n            alt: \"Signature\",\n            style: {\n              maxWidth: 300,\n              marginTop: '1rem'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 11\n      }, this) :\n      /*#__PURE__*/\n      // ==== EDIT VIEW ====\n      _jsxDEV(\"div\", {\n        style: {\n          maxWidth: PREVIEW_MAX_WIDTH,\n          width: '100%'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            marginTop: 0\n          },\n          children: \"Create or Edit Signature\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 443,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: e => e.preventDefault(),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: '1rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Signature Name:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 447,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 448,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: signatureName,\n              onChange: e => setSignatureName(e.target.value),\n              style: {\n                width: '100%'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 449,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 446,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: '1rem',\n              marginBottom: '1rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                flex: 1\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: [\"Name\", /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    color: 'red'\n                  },\n                  children: \" *\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 461,\n                  columnNumber: 25\n                }, this), \":\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 460,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 463,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: name,\n                onChange: e => setName(e.target.value),\n                style: {\n                  width: '100%'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 464,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 459,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                flex: 1\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: [\"Position\", /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    color: 'red'\n                  },\n                  children: \" *\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 473,\n                  columnNumber: 29\n                }, this), \":\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 472,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 475,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: position,\n                onChange: e => setPosition(e.target.value),\n                style: {\n                  width: '100%'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 476,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 471,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 458,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: '1rem',\n              marginBottom: '1rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                flex: 1\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Company:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 488,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 489,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: company,\n                onChange: e => setCompany(e.target.value),\n                style: {\n                  width: '100%'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 490,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 487,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                flex: 1\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Department:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 498,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 499,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: department,\n                onChange: e => setDepartment(e.target.value),\n                style: {\n                  width: '100%'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 500,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 497,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 486,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: '1rem',\n              marginBottom: '1rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                flex: 1\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Location:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 512,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 513,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: selectedLocation,\n                onChange: e => setSelectedLocation(e.target.value),\n                style: {\n                  width: '100%'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  disabled: true,\n                  value: \"\",\n                  children: \"-- Select Location --\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 519,\n                  columnNumber: 21\n                }, this), Object.entries(locations).map(([name, address]) => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: name,\n                  children: name\n                }, name, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 523,\n                  columnNumber: 23\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 514,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 511,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                flex: 1\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Company Logo or Signature Image:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 530,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 531,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                accept: \"image/*\",\n                onChange: handleImageUpload,\n                style: {\n                  width: '100%'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 532,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 529,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 510,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: '0.5rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: handleSave,\n              children: \"Save\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 543,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: () => setViewMode('preview'),\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 546,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 542,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 442,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 254,\n    columnNumber: 5\n  }, this);\n}\n_s(SignaturesView, \"tRaJZsx6j+SsPkkCpATnyhdaNfo=\", false, function () {\n  return [useToast];\n});\n_c = SignaturesView;\nvar _c;\n$RefreshReg$(_c, \"SignaturesView\");","map":{"version":3,"names":["React","useCallback","useEffect","useState","core","clipboard","SignatureCard","viewStyles","useToast","STRINGS","COLOURS","CopyIcon20","EditIcon20","TrashIcon16","PlusIcon20","jsxDEV","_jsxDEV","LEFT_MIN_WIDTH","GUTTER","PREVIEW_MAX_WIDTH","PREVIEW_BG","panel","SIGNATURE_LOGO_WIDTH","SignaturesView","_s","signatureName","setSignatureName","name","setName","position","setPosition","department","setDepartment","company","setCompany","locations","setLocations","selectedLocation","setSelectedLocation","imageFileName","setImageFileName","signatureList","setSignatureList","viewMode","setViewMode","lastSelectedSignature","setLastSelectedSignature","imageBase64","setImageBase64","showToast","handleSave","_locations$selectedLo","signature","signature_name","location","address","image_filename","invoke","then","message","savedChanges","variant","console","log","reloadSignatureList","catch","err","error","names","Promise","all","map","sig","userName","handleSelectSignature","mode","patch","signature_view_last_selected_signature","filename","handleDeleteSignature","prev","filter","deleted","handleCreateNewSignature","handleCopyToClipboard","_locations$selectedLo2","html","writeHtml","copiedToClipboard","handleImageUpload","e","_e$target$files","file","target","files","cache","list","_list$","_cache$signature_view","fallback","toSelect","style","display","height","padding","children","minWidth","flex","borderRight","divider","paddingRight","overflowY","top","background","alignItems","justifyContent","gap","zIndex","margin","fontSize","fontWeight","color","fileName","_jsxFileName","lineNumber","columnNumber","type","title","onClick","width","borderRadius","border","cursor","boxShadow","userSelect","onSelect","onEdit","onDelete","paddingLeft","maxWidth","text","overflow","textOverflow","whiteSpace","right","className","iconBtn","danger","disabled","marginTop","lineHeight","src","alt","onSubmit","preventDefault","marginBottom","value","onChange","Object","entries","accept","_c","$RefreshReg$"],"sources":["C:/Users/lhaveman/email-generator/src/views/SignatureView/SignaturesView.tsx"],"sourcesContent":["\r\nimport React, { useCallback, useEffect, useState } from 'react';\r\nimport { core } from '@tauri-apps/api';\r\nimport clipboard from 'tauri-plugin-clipboard-api';\r\n\r\nimport SignatureCard from '../../components/SignatureCard/SignatureCard';\r\nimport viewStyles from './SignatureView.module.css'\r\n\r\nimport { useToast } from '../../ui/toast';\r\nimport { STRINGS } from '../../ui/strings';\r\nimport { COLOURS } from '../../ui/theme/theme';\r\nimport { CopyIcon20, EditIcon20, TrashIcon16, PlusIcon20 } from '../../ui/icons';\r\n\r\nconst LEFT_MIN_WIDTH = 100;\r\nconst GUTTER = '1rem';\r\nconst PREVIEW_MAX_WIDTH = 450;\r\nconst PREVIEW_BG = COLOURS.panel;\r\nconst SIGNATURE_LOGO_WIDTH = 300;\r\n\r\nexport default function SignaturesView() {\r\n\r\n  const [signatureName, setSignatureName] = useState('');\r\n  const [name, setName] = useState('');\r\n  const [position, setPosition] = useState('');\r\n  const [department, setDepartment] = useState('');\r\n  const [company, setCompany] = useState('');\r\n  const [locations, setLocations] = useState<Record<string, string>>({});\r\n  const [selectedLocation, setSelectedLocation] = useState('');\r\n  const [imageFileName, setImageFileName] = useState('');\r\n  const [signatureList, setSignatureList] = useState<\r\n    { signatureName: string; userName: string }[]\r\n  >([]);\r\n  const [viewMode, setViewMode] = useState<'preview' | 'edit'>('preview');\r\n  const [lastSelectedSignature, setLastSelectedSignature] = useState<string | null>(null);\r\n  const [imageBase64, setImageBase64] = useState<string | null>(null);\r\n\r\n  const { showToast } = useToast();\r\n\r\n  interface Signature {\r\n  signature_name: string;\r\n  name: string;\r\n  position: string;\r\n  department: string;\r\n  company: string;\r\n  location: {\r\n    name: string;\r\n    address: string;\r\n  };\r\n  image_filename: string;\r\n  }\r\n\r\n  const handleSave = () => {\r\n    const signature = {\r\n      signature_name: signatureName,\r\n      name,\r\n      position,\r\n      department,\r\n      company,\r\n      location: {\r\n        name: selectedLocation,\r\n        address: locations[selectedLocation] ?? ''\r\n      },\r\n      image_filename: imageFileName\r\n    };\r\n\r\n    core.invoke('save_signature_to_file', { signature })\r\n      .then(() => {\r\n        showToast({ message: STRINGS.savedChanges, variant: 'success'}); \r\n        console.log('Signature saved to file!')\r\n        reloadSignatureList();\r\n      })\r\n      .catch(err => console.error('Failed to save signature:', err));\r\n  };\r\n\r\n  const reloadSignatureList = () => {\r\n    core.invoke<string[]>('load_signatures')\r\n      .then((names) => {\r\n        Promise.all(\r\n          names.map((name) =>\r\n            core.invoke<Signature>('load_signature_file', { name })\r\n              .then((sig) => ({\r\n                signatureName: sig.signature_name,\r\n                userName: sig.name,\r\n              }))\r\n          )\r\n        ).then(setSignatureList);\r\n      })\r\n      .catch((err) => console.error('Failed to reload signatures:', err));\r\n  };\r\n\r\n\r\n  const handleSelectSignature = useCallback(\r\n    (name: string, mode: 'preview' | 'edit' = 'preview') => {\r\n      // 1) Load the full signature file for this name\r\n      core\r\n        .invoke<Signature>('load_signature_file', { name })\r\n        .then((sig) => {\r\n          // 2) Populate UI state from the loaded signature\r\n          setSignatureName(sig.signature_name);\r\n          setName(sig.name);\r\n          setPosition(sig.position);\r\n          setDepartment(sig.department);\r\n          setCompany(sig.company);\r\n          setSelectedLocation(sig.location.name);\r\n          setImageFileName(sig.image_filename);\r\n          setViewMode(mode);\r\n          setLastSelectedSignature(name);\r\n\r\n          // 3) Persist ONLY this view's last-selected field (safe partial update)\r\n          core\r\n            .invoke('update_cache', {\r\n              patch: { signature_view_last_selected_signature: name },\r\n            })\r\n            .catch((err) => console.error('Failed to update cache:', err));\r\n\r\n          // 4) Load image (if any) as base64 for preview/copy\r\n          if (sig.image_filename) {\r\n            core\r\n              .invoke<string>('get_signature_image_base64', {\r\n                filename: sig.image_filename,\r\n              })\r\n              .then(setImageBase64)\r\n              .catch((err) => {\r\n                setImageBase64(null);\r\n                console.error('Failed to load image:', err);\r\n              });\r\n          } else {\r\n            setImageBase64(null);\r\n          }\r\n        })\r\n        .catch((err) => console.error('Failed to load signature:', err));\r\n    },\r\n    [] // setters are stable; no deps needed. Keeps the callback identity stable.\r\n  );\r\n\r\n\r\n  const handleDeleteSignature = (name: string) => {\r\n\r\n    core.invoke('delete_signature_file', { name })\r\n      .then(() => {\r\n        setSignatureList((prev) => prev.filter((sig) => sig.signatureName !== name));\r\n        // optionally clear current preview if you deleted the currently open one...\r\n        showToast({ message: STRINGS.deleted(name), variant: 'success' });\r\n      })\r\n      .catch((err) => {\r\n        console.error('Failed to delete signature:', err);\r\n        showToast({ message: 'Failed to delete signature', variant: 'danger' });\r\n      });\r\n  };\r\n\r\n  const handleCreateNewSignature = () => {\r\n  // Clear all the form fields\r\n  setSignatureName('');\r\n  setName('');\r\n  setPosition('');\r\n  setDepartment('');\r\n  setCompany('');\r\n  setSelectedLocation('');              // or Object.keys(locations)[0] ?? '' if you want a default\r\n  setImageFileName('');\r\n  setImageBase64(null);\r\n\r\n  // Switch to edit mode so the user can fill it out\r\n  setViewMode('edit');\r\n\r\n  // Do NOT touch lastSelectedSignature or save the cache here;\r\n  // this is a new, unsaved draft.\r\n  };\r\n\r\n  const handleCopyToClipboard = async () => {\r\n    const html = `\r\n      <div>\r\n        <strong>${name}</strong><br/>\r\n        ${position}, ${department}<br/>\r\n        ${company}<br/>\r\n        ${locations[selectedLocation] ?? ''}<br/>\r\n        ${\r\n          imageBase64\r\n                  ? `\r\n                    <img\r\n                      src=\"data:image/png;base64,${imageBase64}\"\r\n                      width=\"${SIGNATURE_LOGO_WIDTH}\"\r\n                      style=\"display:block;width:${SIGNATURE_LOGO_WIDTH}px;height:auto;margin-top:1rem;border:0;outline:0;text-decoration:none;\"\r\n                      alt=\"Signature image\"\r\n                    />`\r\n                  : ''\r\n        }\r\n      </div>\r\n    `;\r\n    try {\r\n      await clipboard.writeHtml(html);\r\n\r\n      showToast({ message: STRINGS.copiedToClipboard, variant: 'success'});\r\n      console.log('Copied to clipboard!');\r\n      \r\n    } catch (err) {\r\n      console.error('Failed to copy to clipboard:', err);\r\n    }\r\n  };\r\n\r\n  const handleImageUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (file) {\r\n      setImageFileName(file.name);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    core.invoke<{ signature_view_last_selected_signature: string | null }>('load_cache')\r\n      .then((cache) => {\r\n        if (cache.signature_view_last_selected_signature) {\r\n          setLastSelectedSignature(cache.signature_view_last_selected_signature);\r\n        }\r\n      }).catch((err) => console.error('Failed to load cache:', err));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    core.invoke<string[]>('load_signatures')\r\n      .then((names) => {\r\n        Promise.all(\r\n          names.map((name) =>\r\n            core.invoke<Signature>('load_signature_file', { name })\r\n              .then((sig) => ({\r\n                signatureName: sig.signature_name,\r\n                userName: sig.name,\r\n              }))\r\n          )\r\n        ).then((list) => {\r\n          setSignatureList(list);\r\n\r\n          // Load cache and select signature\r\n          core.invoke<{ signature_view_last_selected_signature: string | null }>('load_cache')\r\n            .then((cache) => {\r\n              const fallback = list[0]?.signatureName;\r\n              const toSelect = cache.signature_view_last_selected_signature ?? fallback;\r\n              if (toSelect && viewMode === 'preview') \r\n                {\r\n                  handleSelectSignature(toSelect, 'preview');\r\n                }\r\n            })\r\n            .catch((err) => console.error('Failed to load cache:', err));\r\n        });\r\n      })\r\n      .catch((err) => console.error('Failed to load signatures:', err));\r\n  }, [handleSelectSignature, viewMode]);\r\n\r\n\r\n  useEffect(() => {\r\n    core.invoke<Record<string, string>>('load_locations')\r\n      .then(setLocations)\r\n      .catch(err => console.error('Failed to load locations:', err));\r\n  }, []);\r\n\r\n  return (\r\n    <div \r\n      style=\r\n      {{ \r\n        display: 'flex', \r\n        height: '100%', \r\n        padding: '1rem' \r\n      }}\r\n    >\r\n      {/* Left column: for signature list */}\r\n      <div \r\n        style=\r\n        {{ \r\n          minWidth: LEFT_MIN_WIDTH,\r\n          flex: `1 1 ${LEFT_MIN_WIDTH}px`, // grows/shrinks but never below min\r\n          borderRight: `1px solid ${COLOURS.divider}`,\r\n          paddingRight: GUTTER, // padding on the left side of divider\r\n          overflowY: 'auto',\r\n        }}\r\n      > \r\n\r\n        {/* Left column header with + button */}\r\n        <div\r\n          style={{\r\n            position: 'sticky',   // stays visible while list scrolls\r\n            top: 0,\r\n            background: '#fff',\r\n            padding: '0.25rem 0 0.5rem 0',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'space-between',\r\n            gap: '0.5rem',\r\n            zIndex: 1,\r\n          }}\r\n        >\r\n          <h4 style={{ margin: 0, fontSize: '0.875rem', fontWeight: 600, color: '#374151' }}>\r\n            Signatures\r\n          </h4>\r\n\r\n          <button\r\n            type=\"button\"\r\n            aria-label=\"Create new signature\"\r\n            title=\"Create new signature\"\r\n            onClick={handleCreateNewSignature}\r\n            style={{\r\n              display: 'inline-flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              width: 32,\r\n              height: 32,\r\n              borderRadius: 6,\r\n              border: '1px solid #d0d7de',\r\n              background: '#fff',\r\n              color: '#111827',\r\n              cursor: 'pointer',\r\n              boxShadow: '0 1px 2px rgba(0,0,0,0.04)',\r\n              padding: 0,\r\n              userSelect: 'none',\r\n            }}\r\n          >\r\n            {/* Plus Icon */}\r\n            <PlusIcon20/>\r\n          </button>\r\n        </div>\r\n   \r\n        {signatureList.map(({ signatureName, userName }) => (\r\n          <SignatureCard\r\n            key={signatureName}\r\n            signatureName={signatureName}\r\n            userName={userName}\r\n            onSelect={() => handleSelectSignature(signatureName, 'preview')}\r\n            onEdit={() => handleSelectSignature(signatureName, 'edit')}\r\n            onDelete={() => handleDeleteSignature(signatureName)}\r\n          />\r\n        ))}\r\n      </div>\r\n     \r\n      {/* Right column: Signature Preview */}      \r\n      <div style={{ flex: '3 1 0', paddingLeft: GUTTER, overflowY: 'auto' }}>\r\n        {viewMode === 'preview' ? (\r\n          // ==== PREVIEW CONTAINER ====\r\n          <div\r\n            style={{\r\n              position: 'relative',\r\n              background: PREVIEW_BG,\r\n              border: `1px solid ${COLOURS.divider}`,\r\n              borderRadius: 12,\r\n              boxShadow: '0 1px 3px rgba(0,0,0,0.06)',\r\n              padding: '1rem 1rem 1.25rem 1rem',\r\n              maxWidth: PREVIEW_MAX_WIDTH,\r\n              width: '100%',\r\n            }}\r\n          >\r\n            {/* Header: Title on the left, icon actions in the top-right */}\r\n            <div\r\n              style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.75rem',\r\n                paddingRight: 80, // leave some breathing room so text doesn't collide with icons\r\n              }}\r\n            >\r\n              <h3\r\n                title={signatureName || 'Signature Preview'}\r\n                style={{\r\n                  margin: 0,\r\n                  fontSize: '1.125rem',\r\n                  fontWeight: 600,\r\n                  color: `${COLOURS.text}`,\r\n                  overflow: 'hidden',\r\n                  textOverflow: 'ellipsis',\r\n                  whiteSpace: 'nowrap',\r\n                }}\r\n              >\r\n                {signatureName}\r\n              </h3>\r\n            </div>\r\n\r\n            {/* Icon toolbar (top-right corner) */}\r\n            <div\r\n              style={{\r\n                position: 'absolute',\r\n                top: 10,\r\n                right: 10,\r\n                display: 'flex',\r\n                gap: 8,\r\n              }}\r\n            >\r\n              {/* Copy */}\r\n              <button\r\n                type=\"button\"\r\n                aria-label=\"Copy signature to clipboard\"\r\n                title=\"Copy signature to clipboard\"\r\n                onClick={handleCopyToClipboard}\r\n                className={viewStyles.iconBtn}\r\n              >\r\n                {/* Copy SVG */}\r\n                <CopyIcon20 />\r\n              </button>\r\n\r\n              {/* Edit */}\r\n              <button\r\n                type=\"button\"\r\n                aria-label=\"Edit signature\"\r\n                title=\"Edit signature\"\r\n                onClick={() => setViewMode('edit')}\r\n                className={viewStyles.iconBtn}\r\n              >\r\n                {/* Edit SVG */}\r\n                <EditIcon20 />\r\n              </button>\r\n              \r\n                {/* Delete */}\r\n                <button\r\n                  type=\"button\"\r\n                  aria-label=\"Delete signature\"\r\n                  title=\"Delete signature\"\r\n                  onClick={() => signatureName && handleDeleteSignature(signatureName)}\r\n                  className={`${viewStyles.iconBtn} ${viewStyles.danger}`}\r\n                  disabled={!signatureName}\r\n                >\r\n                  {/* Trash SVG */}\r\n                  <TrashIcon16 />\r\n                </button>\r\n            </div>\r\n\r\n            {/* Signature contents */}\r\n            <div style={{ marginTop: '0.75rem', lineHeight: 1.5 }}>\r\n              <p style={{ margin: 0 }}>\r\n                <strong>{name}</strong>\r\n                <br />\r\n                {position}, {department}\r\n                <br />\r\n                {company}\r\n                <br />\r\n                {locations[selectedLocation]}\r\n              </p>\r\n\r\n              {imageBase64 && (\r\n                <img\r\n                  src={`data:image/png;base64,${imageBase64}`}\r\n                  alt=\"Signature\"\r\n                  style={{ maxWidth: 300, marginTop: '1rem' }}\r\n                />\r\n              )}\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          // ==== EDIT VIEW ====\r\n          <div style={{ maxWidth: PREVIEW_MAX_WIDTH, width: '100%' }}>\r\n            <h3 style={{ marginTop: 0 }}>Create or Edit Signature</h3>\r\n            <form onSubmit={(e) => e.preventDefault()}>\r\n              {/* Signature Name */}\r\n              <div style={{ marginBottom: '1rem' }}>\r\n                <label>Signature Name:</label>\r\n                <br />\r\n                <input\r\n                  type=\"text\"\r\n                  value={signatureName}\r\n                  onChange={(e) => setSignatureName(e.target.value)}\r\n                  style={{ width: '100%' }}\r\n                />\r\n              </div>\r\n\r\n              {/* Name and Position */}\r\n              <div style={{ display: 'flex', gap: '1rem', marginBottom: '1rem' }}>\r\n                <div style={{ flex: 1 }}>\r\n                  <label>\r\n                    Name<span style={{ color: 'red' }}> *</span>:\r\n                  </label>\r\n                  <br />\r\n                  <input\r\n                    type=\"text\"\r\n                    value={name}\r\n                    onChange={(e) => setName(e.target.value)}\r\n                    style={{ width: '100%' }}\r\n                  />\r\n                </div>\r\n                <div style={{ flex: 1 }}>\r\n                  <label>\r\n                    Position<span style={{ color: 'red' }}> *</span>:\r\n                  </label>\r\n                  <br />\r\n                  <input\r\n                    type=\"text\"\r\n                    value={position}\r\n                    onChange={(e) => setPosition(e.target.value)}\r\n                    style={{ width: '100%' }}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/* Company and Department */}\r\n              <div style={{ display: 'flex', gap: '1rem', marginBottom: '1rem' }}>\r\n                <div style={{ flex: 1 }}>\r\n                  <label>Company:</label>\r\n                  <br />\r\n                  <input\r\n                    type=\"text\"\r\n                    value={company}\r\n                    onChange={(e) => setCompany(e.target.value)}\r\n                    style={{ width: '100%' }}\r\n                  />\r\n                </div>\r\n                <div style={{ flex: 1 }}>\r\n                  <label>Department:</label>\r\n                  <br />\r\n                  <input\r\n                    type=\"text\"\r\n                    value={department}\r\n                    onChange={(e) => setDepartment(e.target.value)}\r\n                    style={{ width: '100%' }}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/* Location Dropdown and File Picker */}\r\n              <div style={{ display: 'flex', gap: '1rem', marginBottom: '1rem' }}>\r\n                <div style={{ flex: 1 }}>\r\n                  <label>Location:</label>\r\n                  <br />\r\n                  <select\r\n                    value={selectedLocation}\r\n                    onChange={(e) => setSelectedLocation(e.target.value)}\r\n                    style={{ width: '100%' }}\r\n                  >\r\n                    <option disabled value=\"\">\r\n                      -- Select Location --\r\n                    </option>\r\n                    {Object.entries(locations).map(([name, address]) => (\r\n                      <option key={name} value={name}>\r\n                        {name}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n                <div style={{ flex: 1 }}>\r\n                  <label>Company Logo or Signature Image:</label>\r\n                  <br />\r\n                  <input\r\n                    type=\"file\"\r\n                    accept=\"image/*\"\r\n                    onChange={handleImageUpload}\r\n                    style={{ width: '100%' }}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/* Save Button */}\r\n              <div style={{ display: 'flex', gap: '0.5rem' }}>\r\n                <button type=\"button\" onClick={handleSave}>\r\n                  Save\r\n                </button>\r\n                <button type=\"button\" onClick={() => setViewMode('preview')}>\r\n                  Cancel\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}